# Database file for one RTD channel of the SRS PTC10 Temperature Controller

record(stringin, "$(P)$(T):$(C):name_RBV") {
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) name rbv")
  field(INP,  "@PTC10.proto getName($(C)) $(PORT) $(ADDR)")
}

record(ai, "$(P)$(T):$(C):temperature") {
  field(DTYP, "stream")
  field(DESC, "$(C) temperature")
  field(INP,  "@PTC10.proto getOutputLevel($(C)) $(PORT) $(ADDR)")
  field(EGU,  "$(EGU)")
  field(PREC, "$(PREC=4)")
}

record(mbbi, "$(P)$(T):$(C):sensor_RBV")
{
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) Sensor rbv")
  field(INP,  "@PTC10.proto getRtdSensor($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Diode")
  field(ONVL, "1")
  field(ONST, "ROX")
  field(TWVL, "2")
  field(TWST, "RTD")
  field(THVL, "3")
  field(THST, "Thermistor")
  field(FRVL, "4")
  field(FRST, "AD590")
}

## Sensor is locked and can't be changed
#record(mbbo, "$(P)$(T):$(C):sensor")
#{
#  field(DTYP, "stream")
#  #field(PINI, "YES")
#  field(DESC, "$(C) Sensor")
#  field(OUT,  "@PTC10.proto setRtdSensor($(C)) $(PORT) $(ADDR)")
#  field(ZRVL, "0")
#  field(ZRST, "Diode")
#  field(ONVL, "1")
#  field(ONST, "ROX")
#  field(TWVL, "2")
#  field(TWST, "RTD")
#  field(THVL, "3")
#  field(THST, "Thermistor")
#  field(FRVL, "4")
#  field(FRST, "AD590")
#  field(VAL,  "2")
#  field(FLNK, "$(P)$(T):$(C):sensor_RBV")
#}

record(mbbi, "$(P)$(T):$(C):range_RBV")
{
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) Range rbv")
  field(INP,  "@PTC10.proto getRtdRange($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(ZRST, "Auto")
  field(ONST, "10 Ohm")
  field(TWST, "30 Ohm")
  field(THST, "100 Ohm")
  field(FRST, "300 Ohm")
  field(FVST, "1k Ohm")
  field(SXST, "3k Ohm")
  field(SVST, "10k Ohm")
  field(EIST, "30k Ohm")
  field(NIST, "100k Ohm")
  field(TEST, "300k Ohm")
  field(ELST, "2.5 V")
}

record(mbbo, "$(P)$(T):$(C):range")
{
  field(DTYP, "stream")
  #field(PINI, "YES")
  field(DESC, "$(C) Range")
  field(OUT,  "@PTC10.proto setRtdRange($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "11")
  field(ZRST, "Auto")
  field(ONST, "10 Ohm")
  field(TWST, "30 Ohm")
  field(THST, "100 Ohm")
  field(FRST, "300 Ohm")
  field(FVST, "1k Ohm")
  field(SXST, "3k Ohm")
  field(SVST, "10k Ohm")
  field(EIST, "30k Ohm")
  field(NIST, "100k Ohm")
  field(TEST, "300k Ohm")
  field(ELST, "2.5 V")
  field(VAL,  "0")
  field(FLNK, "$(P)$(T):$(C):range_RBV")
}

record(mbbi, "$(P)$(T):$(C):units_RBV")
{
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) Units rbv")
  field(INP,  "@PTC10.proto getRtdUnits($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Ohm")
  field(ONVL, "1")
  field(ONST, "V")
  field(TWVL, "2")
  field(TWST, "mA")
}

## Units is locked and can't be changed
#record(mbbo, "$(P)$(T):$(C):units")
#{
#  field(DTYP, "stream")
#  #field(PINI, "YES")
#  field(DESC, "$(C) Units")
#  field(OUT,  "@PTC10.proto setRtdUnits($(C)) $(PORT) $(ADDR)")
#  field(ZRVL, "0")
#  field(ZRST, "Ohm")
#  field(ONVL, "1")
#  field(ONST, "V")
#  field(TWVL, "2")
#  field(TWST, "mA")
#  field(FLNK, "$(P)$(T):$(C):units_RBV")
#}

record(mbbi, "$(P)$(T):$(C):current_RBV")
{
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) Current rbv")
  field(INP,  "@PTC10.proto getRtdCurrent($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Forward")
  field(ONVL, "1")
  field(ONST, "Reverse")
  field(TWVL, "2")
  field(TWST, "AC")
  field(THVL, "3")
  field(THST, "Off")
}

record(mbbo, "$(P)$(T):$(C):current")
{
  field(DTYP, "stream")
  #field(PINI, "YES")
  field(DESC, "$(C) Current")
  field(OUT,  "@PTC10.proto setRtdCurrent($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Forward")
  field(ONVL, "1")
  field(ONST, "Reverse")
  field(TWVL, "2")
  field(TWST, "AC")
  field(THVL, "3")
  field(THST, "Off")
  field(VAL,  "0")
  field(FLNK, "$(P)$(T):$(C):current_RBV")
}

record(mbbi, "$(P)$(T):$(C):power_RBV")
{
  field(DTYP, "stream")
  field(PINI, "YES")
  field(DESC, "$(C) Power rbv")
  field(INP,  "@PTC10.proto getRtdPower($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Auto")
  field(ONVL, "1")
  field(ONST, "Low")
  field(TWVL, "2")
  field(TWST, "High")
}

record(mbbo, "$(P)$(T):$(C):power")
{
  field(DTYP, "stream")
  #field(PINI, "YES")
  field(DESC, "$(C) Power")
  field(OUT,  "@PTC10.proto setRtdPower($(C)) $(PORT) $(ADDR)")
  field(ZRVL, "0")
  field(ZRST, "Auto")
  field(ONVL, "1")
  field(ONST, "Low")
  field(TWVL, "2")
  field(TWST, "High")
  field(VAL,  "0")
  field(FLNK, "$(P)$(T):$(C):power_RBV")
}
